(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Ihoe:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var o=n("ofXK"),i=n("TEn/"),c=n("fXoL");let r=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({imports:[[o.c,i.I]]}),t})()},QUh0:function(t,e,n){"use strict";n.r(e),n.d(e,"EditFoodModule",function(){return _});var o=n("ofXK"),i=n("3Pt+"),c=n("TEn/"),r=n("tyNb"),s=n("mrSG"),a=n("fXoL"),b=n("KJOm"),d=n("Aj8l"),g=n("0jJR");const l=["imageElement"];function p(t,e){1&t&&a.Lb(0,"div")}function f(t,e){1&t&&(a.Nb(0,"div",25),a.oc(1,"L'image est trop grande !"),a.Mb())}function u(t,e){if(1&t){const t=a.Ob();a.Nb(0,"img",22,23),a.Vb("load",function(){return a.ic(t),a.Xb(2).checkImageDimensions()}),a.Mb(),a.mc(2,f,2,0,"div",24)}if(2&t){const t=a.Xb(2);a.ec("src",t.food.image,a.jc),a.Ab(2),a.ec("ngIf",t.imageError)}}function m(t,e){1&t&&(a.Nb(0,"div",25),a.oc(1,"L'image est trop grande !"),a.Mb())}function h(t,e){if(1&t){const t=a.Ob();a.Nb(0,"img",22,23),a.Vb("load",function(){return a.ic(t),a.Xb(2).checkImageDimensions()}),a.Mb(),a.mc(2,m,2,0,"div",24)}if(2&t){const t=a.Xb(2);a.ec("src",t.imgResultAfterResizeMax,a.jc),a.Ab(2),a.ec("ngIf",t.imageError)}}function M(t,e){if(1&t){const t=a.Ob();a.Nb(0,"div",9),a.Nb(1,"div",10),a.Nb(2,"label"),a.oc(3,"Name"),a.Mb(),a.Nb(4,"input",11),a.Vb("ngModelChange",function(e){return a.ic(t),a.Xb().food.title=e}),a.Mb(),a.Mb(),a.Nb(5,"div",10),a.Nb(6,"label"),a.oc(7,"Description"),a.Mb(),a.Nb(8,"input",12),a.Vb("ngModelChange",function(e){return a.ic(t),a.Xb().food.description=e}),a.Mb(),a.Mb(),a.Nb(9,"div",10),a.Nb(10,"div",13),a.Nb(11,"label",14),a.oc(12," Disponible "),a.Mb(),a.Mb(),a.Nb(13,"input",15),a.Vb("ngModelChange",function(e){return a.ic(t),a.Xb().food.published=e}),a.Mb(),a.Mb(),a.Lb(14,"br"),a.Lb(15,"br"),a.Lb(16,"br"),a.Lb(17,"br"),a.Nb(18,"div"),a.Nb(19,"label"),a.oc(20,"Modifier l'image"),a.Mb(),a.Lb(21,"br"),a.Nb(22,"button",16),a.Vb("click",function(){return a.ic(t),a.Xb().uploadAndReturnWithMaxSize()}),a.oc(23," Veuillez choisir une image "),a.Mb(),a.Lb(24,"br"),a.Lb(25,"br"),a.Nb(26,"div",17),a.mc(27,p,1,0,"div",18),a.mc(28,u,3,2,"ng-template",null,19,a.nc),a.mc(30,h,3,2,"ng-template",null,20,a.nc),a.Mb(),a.Mb(),a.Nb(32,"ion-button",21),a.Vb("click",function(){return a.ic(t),a.Xb().updateFood()}),a.oc(33,"Update"),a.Mb(),a.Mb()}if(2&t){const t=a.gc(29),e=a.gc(31),n=a.Xb();a.Ab(4),a.ec("ngModel",n.food.title),a.Ab(4),a.ec("ngModel",n.food.description),a.Ab(5),a.ec("ngModel",n.food.published),a.Ab(14),a.ec("ngIf",!n.imgResultAfterResizeMax)("ngIfThen",t)("ngIfElse",e)}}const x=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,c,r,s,a){this.activatedRoute=t,this.foodService=e,this.cartService=n,this.toastCtrl=o,this.router=i,this.route=c,this.imageCompress=r,this.el=s,this.renderer=a,this.maxWidth=400,this.maxHeight=400,this.message="",this.imgResultAfterResizeMax="",this.imageError=!1,this.id=+this.activatedRoute.snapshot.paramMap.get("id"),this.timestamp=Date.now()}ngOnInit(){this.getFoodById(this.id)}getFoodById(t){this.foodService.getFoodsById(this.id).subscribe(t=>{this.food=t,console.log(t)},t=>{console.log(t)})}addItemToCart(){this.cartService.addToCart({id:this.food.id,name:this.food.title,price:this.food.price,image:this.imgResultAfterResizeMax,quantity:1}),this.presentToast()}presentToast(){return Object(s.a)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Food added to the cart",mode:"ios",duration:1e3,position:"bottom",color:"success"})).present(),this.router.navigate(["/admin/listing"])})}confirmationEdit(){return Object(s.a)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Updated successfully!",mode:"ios",duration:1e3,position:"bottom",color:"success"})).present(),this.router.navigate(["/admin/listing"])})}uploadAndReturnWithMaxSize(){return this.imageCompress.uploadAndGetImageWithMaxSize(1,!0).then(t=>{this.imgResultAfterResizeMax=t,console.log("--\x3e",t)},t=>{console.error("The compression algorithm didn't succed! The best size we can do is",this.imageCompress.byteCount(t),"bytes"),this.imgResultAfterResizeMax=t})}updateFood(){this.foodService.update(this.id,{title:this.food.title,price:this.food.price,image:this.imgResultAfterResizeMax,description:this.food.description,published:this.food.published}).subscribe(t=>{console.log(t),this.message=t.message?t.message:"This element was updated successfully!",this.confirmationEdit(),window.location.reload()},t=>{console.log(t)}),this.router.navigate(["/admin/listing"])}checkImageDimensions(){const t=this.imageElement.nativeElement;(t.height>400||t.height>400)&&(this.imageError=!0)}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(r.a),a.Kb(b.a),a.Kb(d.a),a.Kb(c.S),a.Kb(r.f),a.Kb(r.a),a.Kb(g.a),a.Kb(a.m),a.Kb(a.F))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-edit-food"]],viewQuery:function(t,e){if(1&t&&a.sc(l,1),2&t){let t;a.fc(t=a.Wb())&&(e.imageElement=t.first)}},inputs:{maxWidth:"maxWidth",maxHeight:"maxHeight"},decls:21,vars:3,consts:[[1,"header"],["routerLink","/admin/listing"],["slot","icon-only","color","light","name","arrow-back"],[1,"title"],["slot","icon-only","color","light","name","d-heart"],[1,"card"],[1,"image"],[3,"src"],["class","submit-form",4,"ngIf"],[1,"submit-form"],[1,"form-group"],["type","text","id","title","placeholder","title","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["id","description","placeholder","Description","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"cell"],[1,"label"],["type","checkbox",3,"ngModel","ngModelChange"],[3,"click"],[1,"img"],[4,"ngIf","ngIfThen","ngIfElse"],["content1",""],["content2",""],["expand","full","color","success",3,"click"],[3,"src","load"],["imageElement",""],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,e){1&t&&(a.Nb(0,"ion-content"),a.Nb(1,"div",0),a.Nb(2,"ion-buttons"),a.Nb(3,"ion-button",1),a.Lb(4,"ion-icon",2),a.Mb(),a.Mb(),a.Nb(5,"div",3),a.Nb(6,"p"),a.oc(7),a.Mb(),a.Mb(),a.Nb(8,"ion-buttons"),a.Nb(9,"ion-button"),a.Lb(10,"ion-icon",4),a.Mb(),a.Mb(),a.Mb(),a.Nb(11,"div",5),a.Nb(12,"div",6),a.Lb(13,"ion-img",7),a.Mb(),a.Lb(14,"br"),a.Lb(15,"br"),a.Lb(16,"br"),a.Lb(17,"br"),a.Lb(18,"br"),a.Lb(19,"br"),a.mc(20,M,34,6,"div",8),a.Mb(),a.Mb()),2&t&&(a.Ab(7),a.qc(" Edit category: ",null==e.food?null:e.food.title,""),a.Ab(6),a.ec("src",null==e.food?null:e.food.image),a.Ab(7),a.ec("ngIf",e.food))},directives:[c.j,c.d,c.c,c.P,r.g,c.m,c.n,o.l,i.b,i.r,i.l,i.o,i.a],styles:['ion-content[_ngcontent-%COMP%]{--background:#6b45bc;position:relative}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem .5rem}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:60px;width:60px}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:75%;width:100%;background:#fff;position:absolute;bottom:0;border-radius:3rem 3rem 0 0;padding:2rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;top:-6.5rem;width:50%;left:50%;transform:translateX(-50%)}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-top:35%;display:flex;justify-content:space-between;align-items:center;margin-bottom:1.2rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:2.1rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#ffb800}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   sup[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:-.5rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .rates[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:3rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{margin-bottom:2.5rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;color:#b9b9b9}.img[_ngcontent-%COMP%]{max-width:300px;height:auto}.error-message[_ngcontent-%COMP%]{background-color:red;color:#fff}.title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#ffb800;font-size:1.2rem;margin-right:-.5rem}input[_ngcontent-%COMP%]{width:95%;padding:12px 20px;margin:8px;box-sizing:border-box}input[type=checkbox][_ngcontent-%COMP%]{-webkit-appearance:none;outline:none;position:absolute;height:40px;width:120px;border:15px solid var(--body);border-radius:300px;cursor:pointer;box-shadow:9px 9px 16px #bdbdbd99,-9px -9px 16px #ffffff80,inset 10px 10px 15px -10px #c3c3c3,inset -10px -10px 15px -10px #fff}input[type=checkbox][_ngcontent-%COMP%]:before{content:"";height:30px;width:30px;background-color:var(--body);position:absolute;margin:auto;top:0;left:15px;bottom:0;border-radius:50%;box-shadow:7px 7px 15px #c3c3c3,9px 9px 16px #bdbdbd99;transition:.15s}input[type=checkbox][_ngcontent-%COMP%]:after{content:"Non";position:absolute;font-size:20px;top:9px;right:15px;color:var(--text-secondary);font-family:SF Pro Text,Helvetica Neue,Helvetica,Arial,sans-serif}input[type=checkbox][_ngcontent-%COMP%]:checked{background:#0071e3}@media (prefers-color-scheme:light){input[type=checkbox][_ngcontent-%COMP%]:checked{box-shadow:9px 9px 16px #bdbdbd99,-9px -9px 16px #ffffff80,inset 10px 10px 15px -10px #0047b9,inset -10px -10px 15px -10px #0047b9}}input[type=checkbox][_ngcontent-%COMP%]:checked:before{left:85px;box-shadow:none}input[type=checkbox][_ngcontent-%COMP%]:checked:after{content:"Oui";left:15px;color:#f5f5f7}']}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({imports:[[r.i.forChild(x)],r.i]}),t})();var O=n("ej3e"),P=n("Ihoe");let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({imports:[[o.c,i.g,c.I,C,O.a,P.a,i.q]]}),t})()},ej3e:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var o=n("ofXK"),i=n("TEn/"),c=n("fXoL");let r=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({imports:[[o.c,i.I]]}),t})()}}]);