(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"W+Ie":function(e,t,n){"use strict";n.r(t),n.d(t,"HistoryModule",function(){return P});var i=n("ofXK"),c=n("3Pt+"),o=n("TEn/"),a=n("tyNb"),s=n("fXoL"),r=n("XNiG"),m=n("l5mm"),d=n("JX91"),h=n("eIep"),b=n("vkgz"),l=n("tk/3");let u=(()=>{class e{constructor(e){this.http=e,this.apiUrl="https://oafish-orange-production.up.railway.app/api/command/commands/",this.refreshInterval=5e3,this.notificationSound=new Audio("assets/audio/songOrder.mp3"),this.currentNumberOfCommandes=0,this.previousCommandes=[],this.allCommandReceivedSubject=new r.a,this.allCommandReceivedInOrderSubject=new r.a,this.commandReceivedTodaySubject=new r.a,this.commandReceivedYesterdaySubject=new r.a,this.commandReceivedThisWeekSubject=new r.a,this.commandReceivedThisMonthSubject=new r.a,this.allSumPricecommandSubject=new r.a,this.sumPricecommandTodaySubject=new r.a,this.sumPricecommandYesterdaySubject=new r.a,this.sumPricecommandThisWeekSubject=new r.a,this.sumPricecommandThisMonthSubject=new r.a,this.deleteCommandSubject=new r.a,this.allCommandReceived$=this.allCommandReceivedSubject.asObservable(),this.allCommandReceivedInOrder$=this.allCommandReceivedInOrderSubject.asObservable(),this.commandReceivedToday$=this.commandReceivedTodaySubject.asObservable(),this.commandReceivedYesterday$=this.commandReceivedYesterdaySubject.asObservable(),this.commandReceivedThisWeek$=this.commandReceivedThisWeekSubject.asObservable(),this.commandReceivedThisMonth$=this.commandReceivedThisMonthSubject.asObservable(),this.allSumPricecommand$=this.allSumPricecommandSubject.asObservable(),this.sumPricecommandToday$=this.sumPricecommandTodaySubject.asObservable(),this.sumPricecommandYesterday$=this.sumPricecommandYesterdaySubject.asObservable(),this.sumPricecommandThisWeek$=this.sumPricecommandThisWeekSubject.asObservable(),this.sumPricecommandThisMonth$=this.sumPricecommandThisMonthSubject.asObservable(),this.deleteCommand$=this.deleteCommandSubject.asObservable(),this.startPolling()}startPolling(){this.allCommandReceived$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"ordre-inverse")),Object(b.a)(e=>this.allCommandReceivedSubject.next(e))),this.allCommandReceivedInOrder$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"getAll")),Object(b.a)(e=>{})),this.commandReceivedToday$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"added-today")),Object(b.a)(e=>{this.commandReceivedTodaySubject.next(e),e.length>0&&this.notificationSound.play()})),this.commandReceivedYesterday$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"added-yesterday")),Object(b.a)(e=>this.commandReceivedYesterdaySubject.next(e))),this.commandReceivedThisWeek$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"added-this-week")),Object(b.a)(e=>this.commandReceivedThisWeekSubject.next(e))),this.commandReceivedThisMonth$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"added-this-mounth")),Object(b.a)(e=>this.commandReceivedThisMonthSubject.next(e))),this.allSumPricecommand$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"somme-prix-total")),Object(b.a)(e=>this.allSumPricecommandSubject.next(e))),this.sumPricecommandToday$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"sum-price-today")),Object(b.a)(e=>this.sumPricecommandTodaySubject.next(e))),this.sumPricecommandYesterday$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"sum-price-yesterday")),Object(b.a)(e=>this.sumPricecommandYesterdaySubject.next(e))),this.sumPricecommandThisWeek$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"sum-price-thisweek")),Object(b.a)(e=>this.sumPricecommandThisWeekSubject.next(e))),this.sumPricecommandThisMonth$=Object(m.a)(this.refreshInterval).pipe(Object(d.a)(0),Object(h.a)(()=>this.http.get(this.apiUrl+"sum-price-thismounth")),Object(b.a)(e=>this.sumPricecommandThisMonthSubject.next(e)))}deleteCommande(e){return this.http.delete(`${this.apiUrl}/${e}`)}getAllCommandesReceived(){return this.allCommandReceived$}getAllCommandesReceivedInOrder(){return this.allCommandReceivedInOrder$}commandReceivedToday(){return this.commandReceivedToday$}commandReceivedYesterday(){return this.commandReceivedYesterday$}commandReceivedThisWeek(){return this.commandReceivedThisWeek$}commandReceivedThisMonth(){return this.commandReceivedThisMonth$}allSumPricecommand(){return this.allSumPricecommand$}sumPricecommandToday(){return this.sumPricecommandToday$}sumPricecommandYesterday(){return this.sumPricecommandYesterday$}sumPricecommandThisWeek(){return this.sumPricecommandThisWeek$}sumPricecommandThisMonth(){return this.sumPricecommandThisMonth$}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(l.b))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=n("/24w"),O=n("ib1Z");function g(e,t){if(1&e){const e=s.Ob();s.Nb(0,"li",8),s.Vb("click",function(){s.ic(e);const n=t.$implicit;return s.Xb().goToDetailsCommand(n.id)}),s.Nb(1,"div",9),s.oc(2),s.Mb(),s.Nb(3,"div",10),s.oc(4),s.Mb(),s.Nb(5,"div",11),s.oc(6),s.Yb(7,"slice"),s.Mb(),s.Nb(8,"div",12),s.oc(9),s.Mb(),s.Nb(10,"div",13),s.oc(11),s.Mb(),s.Lb(12,"br"),s.Lb(13,"br"),s.Lb(14,"br"),s.Lb(15,"br"),s.Mb()}if(2&e){const e=t.$implicit;s.Ab(2),s.qc("#",e.id,""),s.Ab(2),s.qc("",e.price," \u20ac"),s.Ab(2),s.qc(" ",e.contents.length>120?s.bc(7,6,e.contents,0,120)+"...":e.contents,""),s.Ab(3),s.pc(e.table),s.Ab(2),s.rc("",e.date," ",e.time,"")}}const v=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.autoService=e,this.router=t,this.commandsToPrepareService=n,this.canalService=i,this.getAllCommandesReceived=null}ngOnInit(){this.getAllCommands(this.canalService.getUserIdFoCommand())}getAllCommands(e){this.commandsToPrepareService.allCommandsInversedByUserId(e).subscribe(e=>{this.getAllCommandesReceived=e},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es:",e)})}goToDetailsCommand(e){this.router.navigate(["command/history/details/",e])}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(u),s.Kb(a.f),s.Kb(p.a),s.Kb(O.a))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-history"]],decls:14,vars:1,consts:[[1,"ionContent"],[1,"header"],["routerLink","/command/listing"],["slot","icon-only","color","light","name","arrow-back"],[1,"orderHistory"],["slot","icon-only"],[1,"custom-list"],["class","flex-container",3,"click",4,"ngFor","ngForOf"],[1,"flex-container",3,"click"],[1,"item","item-id"],[1,"item","item-price"],[1,"item","item-contents"],[1,"item","item-date"],[1,"item","item-time"]],template:function(e,t){1&e&&(s.Nb(0,"ion-content",0),s.Nb(1,"div",1),s.Nb(2,"ion-buttons"),s.Nb(3,"ion-button",2),s.Lb(4,"ion-icon",3),s.Mb(),s.Mb(),s.Nb(5,"div",4),s.Nb(6,"p"),s.oc(7," L'historique des commandes"),s.Mb(),s.Mb(),s.Nb(8,"ion-buttons"),s.Nb(9,"ion-button"),s.Lb(10,"ion-icon",5),s.Mb(),s.Mb(),s.Mb(),s.Lb(11,"br"),s.Nb(12,"ul",6),s.mc(13,g,16,10,"li",7),s.Mb(),s.Mb()),2&e&&(s.Ab(13),s.ec("ngForOf",t.getAllCommandesReceived))},directives:[o.j,o.d,o.c,o.P,a.g,o.m,i.k],pipes:[i.o],styles:["ion-content[_ngcontent-%COMP%]{--background:#d9d5e085;padding:2rem;position:relative}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background:#6b45bc;border-radius:0 0 1rem 1rem;display:flex;justify-content:space-between;padding:0 .5rem}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .orderHistory[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#ffb800;font-size:1.2rem;margin-right:-.5rem;text-align:center}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .ion-button[_ngcontent-%COMP%]{height:60px;width:60px}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .ion-button[_ngcontent-%COMP%]   .ion-icon[_ngcontent-%COMP%]{font-size:2rem}ion-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}ion-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fff;font-size:18px;border-radius:5px;padding:10px;margin-bottom:10px;box-shadow:0 2px 5px #0003;transition:background-color .3s ease;display:flex;justify-content:center;align-items:center;position:relative}ion-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#ffbf80;cursor:pointer}ion-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:8px;border-radius:5px;margin:5px;color:#0d0d0d;font-size:14px;flex:0 0 32%;position:absolute}ion-content[_ngcontent-%COMP%]   .item-id[_ngcontent-%COMP%]{top:0;left:0;box-shadow:0 1px 3px #0003}ion-content[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{background-color:#3af107c2;top:0;right:0;box-shadow:0 5px 9px #3af107c2}ion-content[_ngcontent-%COMP%]   .item-contents[_ngcontent-%COMP%]{top:30%;left:50%;transform:translate(-50%,-50%);width:70%;height:70%;text-align:center}ion-content[_ngcontent-%COMP%]   .item-date[_ngcontent-%COMP%]{bottom:0;left:0}ion-content[_ngcontent-%COMP%]   .item-time[_ngcontent-%COMP%]{bottom:0;right:0}"]}),e})()}];let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({imports:[[a.i.forChild(v)],a.i]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({imports:[[i.c,c.g,o.I,j]]}),e})()}}]);