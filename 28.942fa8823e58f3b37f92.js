(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{EPCR:function(t,e,n){"use strict";n.r(e),n.d(e,"CartPageModule",function(){return k});var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),s=n("mrSG"),a="https://js.stripe.com/v3",m=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,d=null,l=function(t,e,n){if(null===t)return null;var o=t.apply(void 0,e);return function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.46.0",startTime:e})}(o,n),o},u=Promise.resolve().then(function(){return null,null!==d?d:d=new Promise(function(t,e){if("undefined"!=typeof window)if(window,window.Stripe)t(window.Stripe);else try{var n=function(){for(var t=document.querySelectorAll('script[src^="'.concat(a,'"]')),e=0;e<t.length;e++){var n=t[e];if(m.test(n.src))return n}return null}();n||(n=function(t){var e=document.createElement("script");e.src="".concat(a).concat("");var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(e),e}()),n.addEventListener("load",function(){window.Stripe?t(window.Stripe):e(new Error("Stripe.js not available"))}),n.addEventListener("error",function(){e(new Error("Failed to load Stripe.js"))})}catch(o){return void e(o)}else t(null)})}),p=!1;u.catch(function(t){p||console.warn(t)});var g=n("fXoL"),b=n("Aj8l"),h=n("jmJh"),f=n("tk/3");const C="https://oafish-orange-production.up.railway.app/api/client/commands";let M=(()=>{class t{constructor(t){this.http=t}getAll(){return this.http.get(C)}getCommandsById(t){return this.http.get(`${C}/${t}`)}delete(t){return this.http.delete(`${C}/${t}`)}create(t){return this.http.post(C,t)}update(t,e){return this.http.put(`${C}/${t}`,e)}getElementsAjoutesAujourdhui(){return this.http.get(`${C}/added-today`)}getElementsAjoutesHier(){return this.http.get(`${C}/added-yesterday`)}getElementsAjoutesCetteSemaine(){return this.http.get(`${C}/added-this-week`)}getElementsAjoutesCeMois(){return this.http.get(`${C}/added-this-mounth`)}getElementsAjoutesTotal(){return this.http.get(`${C}/getAll`)}getElementsAjoutesOrdreDecroissant(){return this.http.get(`${C}/ordre-inverse`)}getSommePrixAujourdhui(){return this.http.get(`${C}/sum-price-today`)}getSommePrixHier(){return this.http.get(`${C}/sum-price-yesterday`)}getSommePrixCetteSemaine(){return this.http.get(`${C}/sum-price-thisweek`)}getSommePrixCeMois(){return this.http.get(`${C}/sum-price-thismounth`)}getSommePrixTotal(){return this.http.get(`${C}/somme-prix-total`)}}return t.\u0275fac=function(e){return new(e||t)(g.Rb(f.b))},t.\u0275prov=g.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=n("/24w"),y=n("ib1Z");let P=(()=>{class t{constructor(){this.increase=new g.o,this.decrease=new g.o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Eb({type:t,selectors:[["app-cart-item"]],inputs:{item:"item"},outputs:{increase:"increase",decrease:"decrease"},decls:20,vars:7,consts:[[1,"cart-item"],[1,"image"],[3,"src"],[1,"description"],[1,"actions"],[3,"click"],["slot","icon-only","name","add"],[1,"counter"],["slot","icon-only","name","remove"]],template:function(t,e){1&t&&(g.Nb(0,"div",0),g.Nb(1,"div",1),g.Lb(2,"ion-img",2),g.Mb(),g.Nb(3,"div",3),g.Nb(4,"h3"),g.oc(5),g.Mb(),g.Nb(6,"p"),g.Nb(7,"sup"),g.oc(8,"\u20ac"),g.Mb(),g.oc(9),g.Yb(10,"number"),g.Mb(),g.Mb(),g.Nb(11,"div",4),g.Nb(12,"ion-buttons"),g.Nb(13,"ion-button",5),g.Vb("click",function(){return e.increase.emit()}),g.Lb(14,"ion-icon",6),g.Mb(),g.Mb(),g.Nb(15,"div",7),g.oc(16),g.Mb(),g.Nb(17,"ion-buttons"),g.Nb(18,"ion-button",5),g.Vb("click",function(){return e.decrease.emit()}),g.Lb(19,"ion-icon",8),g.Mb(),g.Mb(),g.Mb(),g.Mb()),2&t&&(g.Ab(2),g.ec("src",e.item.image),g.Ab(3),g.pc(e.item.name),g.Ab(4),g.pc(g.ac(10,4,e.item.price,"1.2")),g.Ab(7),g.pc(e.item.quantity))},directives:[r.n,r.d,r.c,r.m],pipes:[o.e],styles:[".cart-item[_ngcontent-%COMP%]{background:#f3f3f3;padding:1.5rem 1rem;border-radius:1.5rem;display:flex;justify-content:space-between;width:95%;margin-left:5%;position:relative}.cart-item[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;margin-right:1.2rem;position:absolute;left:-5%;top:50%;transform:translateY(-50%);box-shadow:10px 10px 10px 0 #c5c5c5}.cart-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex:1;margin-left:28%;display:flex;flex-direction:column;justify-content:space-between}.cart-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#1f1f1f}.cart-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#ffb800;margin:.5rem 0}.cart-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   sup[_ngcontent-%COMP%]{font-size:.8rem;margin-right:2px}.cart-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:large;margin-right:2px}.cart-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{border:1px solid #c7c7c7;border-radius:2rem}.cart-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{width:35px;height:35px;display:flex;justify-content:center;align-items:center;font-size:1.3rem;font-weight:700;color:#6b45bc}.cart-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background:#fff;--box-shadow:0px 2px 10px grey;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;height:35px;width:35px}"]}),t})();var O=n("3YCr"),_=n("sYmb");function w(t,e){if(1&t&&(g.Nb(0,"h3",5),g.oc(1),g.Yb(2,"async"),g.Yb(3,"translate"),g.Mb()),2&t){const t=g.Xb();g.Ab(1),g.rc("",g.Zb(2,2,t.cartItems$).length," ",g.Zb(3,4,"ITEMS_IN_CART"),"")}}function S(t,e){if(1&t){const t=g.Ob();g.Nb(0,"ion-item-sliding"),g.Nb(1,"ion-item"),g.Nb(2,"app-cart-item",6),g.Vb("increase",function(){g.ic(t);const n=e.$implicit;return g.Xb().onIncrease(n)})("decrease",function(){g.ic(t);const n=e.$implicit;return g.Xb().onDecrease(n)}),g.Mb(),g.Mb(),g.Nb(3,"ion-item-options",7),g.Nb(4,"ion-item-option",8),g.Vb("click",function(){g.ic(t);const n=e.$implicit;return g.Xb().removeFromCart(n)}),g.Lb(5,"ion-icon",9),g.Mb(),g.Mb(),g.Mb()}if(2&t){const t=e.$implicit;g.Ab(2),g.ec("item",t)}}function x(t,e){1&t&&(g.Nb(0,"div",10),g.Lb(1,"ion-icon",11),g.Nb(2,"p"),g.oc(3),g.Yb(4,"translate"),g.Mb(),g.Mb()),2&t&&(g.Ab(3),g.pc(g.Zb(4,1,"EmtyCart")))}function A(t,e){if(1&t){const t=g.Ob();g.Nb(0,"app-button",8),g.Vb("click",function(){return g.ic(t),g.Xb().payByCash()}),g.oc(1),g.Yb(2,"translate"),g.Nb(3,"span"),g.oc(4),g.Yb(5,"number"),g.Yb(6,"async"),g.Nb(7,"sup"),g.oc(8,"\u20ac"),g.Mb(),g.Mb(),g.Mb()}if(2&t){const t=g.Xb();g.Ab(1),g.qc(" ",g.Zb(2,2,"PAY_AT_RECEPTION"),""),g.Ab(3),g.qc("",g.ac(5,4,g.Zb(6,7,t.totalAmount$),"1.2")," ")}}const $=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,r,c,s,a,m){this.cartService=t,this.statusCommandService=e,this.commandService=n,this.commandsToPrepareService=o,this.alertCtrl=i,this.router=r,this.toastCtrl=c,this.route=s,this.navCtrl=a,this.canalService=m,this.cart=[],this.myCommand="",this.str="",this.commandeStatus="En cours de pr\xe9paration...",this.cartItem={id:0,name:"",price:0,quantity:0,image:""}}ngOnInit(){this.cartItems$=this.cartService.getCart(),this.totalAmount$=this.cartService.getTotalAmount()}onIncrease(t){this.cartService.changeQty(1,t.id)}removeAll(){console.log("remove all elements")}payByCard2(){window.alert("Cette fonctionalit\xe9 ne existe pas encore ")}payByCard(){return Object(s.a)(this,void 0,void 0,function*(){if(this.cartService.getTotalAmount().subscribe(t=>this.price=t),this.price<=0)return void console.error("Invalid amount.");const t=yield function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];p=!0;var o=Date.now();return u.then(function(t){return l(t,e,o)})}("pk_live_51MMIYlFkf97k2wLsDtra4wFXmnlfposxTOLkojEXhuQ9IbtQuhWU04IVYXU6DoVJeY9CrkYgezvddPCSc3VUmtoH00YMhePWri"),{error:e}=yield t.redirectToCheckout({lineItems:[{price:"price_1NhKh1Fkf97k2wLsrrvVG0PI",quantity:1}],mode:"payment",successUrl:"https://smarteasyorders.com",cancelUrl:"https://your-website.com/cancel"});e&&console.error("Payment error:",e)})}saveCommand2(){console.log("payment ok")}saveCommand(){this.cartService.getCart().subscribe(t=>this.cart=t);for(let i=0;i<this.cart.length;i++)this.myCommand+=this.cart[i].quantity+" "+this.cart[i].name+" / \n";this.cartService.getTotalAmount().subscribe(t=>this.price=t);const t=new Date,e=new Date;this.dateAujourdhui=this.formaterDate(e),this.heureActuelle=this.formaterHeure(t),console.log("heureActuelle ----------\x3e",this.heureActuelle);const n={contents:this.myCommand,date:this.dateAujourdhui,time:this.heureActuelle,table:this.canalService.getCanal(),price:this.price,user:{id:this.canalService.getUserId()}};let o={id:0,name:this.myCommand,price:this.price,status:this.commandeStatus};console.log("this is the data: ",n),this.commandService.create(n).subscribe(t=>{console.log(t),window.alert("Votre commande est bien enregistr\xe9, nous vous severons d\xe8s que possible !"),this.statusCommandService.addToCommand(o),o=null},t=>{console.log(t),console.log("Votre commande est pas enregistr\xe9")}),this.commandsToPrepareService.create(n).subscribe(t=>{console.log(t),this.myCommand="",console.log("commandsToPrepare saved")},t=>{console.log(t)}),this.cartService.clearCart(),this.router.navigate(["/client/statuscommand"])}formaterDate(t){return`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`}formaterHeure(t){return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`}onDecrease(t){1===t.quantity?this.removeFromCart(t):this.cartService.changeQty(-1,t.id)}removeFromCart(t){return Object(s.a)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:"Remove",message:"Are you sure you want to remove "+t.name+"?",buttons:[{text:"Yes",handler:()=>this.cartService.removeItem(t.id)},{text:"No"}]})).present()})}payByCash(){return Object(s.a)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:"Confirmation",message:"\xcates-vous s\xfbr de vouloir passer cette commande ?",buttons:[{text:"Non"},{text:"Oui",handler:()=>this.saveCommand()}]})).present()})}presentToast(){return Object(s.a)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:"Confirmation",message:"Votre commande est bien enregistr\xe9, nous vous severons d\xe8s que possible !",buttons:[{text:"Ok"}]})).present()})}}return t.\u0275fac=function(e){return new(e||t)(g.Kb(b.a),g.Kb(h.a),g.Kb(M),g.Kb(v.a),g.Kb(r.a),g.Kb(c.f),g.Kb(r.S),g.Kb(c.a),g.Kb(r.L),g.Kb(y.a))},t.\u0275cmp=g.Eb({type:t,selectors:[["app-cart"]],decls:10,vars:12,consts:[["class","title",4,"ngIf"],["lines","none"],[4,"ngFor","ngForOf"],["class","empty-cart",4,"ngIf"],[3,"click",4,"ngIf"],[1,"title"],[3,"item","increase","decrease"],["side","end"],[3,"click"],["name","trash-outline","size","large","color","danger"],[1,"empty-cart"],["name","d-cart"]],template:function(t,e){1&t&&(g.Nb(0,"ion-content"),g.mc(1,w,4,6,"h3",0),g.Yb(2,"async"),g.Nb(3,"ion-list",1),g.mc(4,S,6,1,"ion-item-sliding",2),g.Yb(5,"async"),g.Mb(),g.mc(6,x,5,3,"div",3),g.Yb(7,"async"),g.mc(8,A,9,9,"app-button",4),g.Yb(9,"async"),g.Mb()),2&t&&(g.Ab(1),g.ec("ngIf",g.Zb(2,4,e.cartItems$).length),g.Ab(3),g.ec("ngForOf",g.Zb(5,6,e.cartItems$)),g.Ab(2),g.ec("ngIf",!g.Zb(7,8,e.cartItems$).length),g.Ab(2),g.ec("ngIf",g.Zb(9,10,e.cartItems$).length))},directives:[r.j,o.l,r.u,o.k,r.s,r.p,P,r.r,r.q,r.m,O.a],pipes:[o.b,_.c,o.e],styles:["ion-content[_ngcontent-%COMP%]{--padding-top:1.6rem;--padding-end:1.6rem}ion-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;color:#1f1f1f;margin-bottom:2rem;padding-left:1.6rem;text-align:center}ion-content[_ngcontent-%COMP%]   app-cart-item[_ngcontent-%COMP%]{display:block;width:100%;padding-left:1.6rem}ion-content[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]{margin-bottom:2rem;overflow:hidden}ion-content[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:0;--inner-padding-end:0;border-radius:25px}ion-content[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item-options[_ngcontent-%COMP%]{border:2px solid #f3f3f3;border-radius:25px;overflow:hidden;background:#fff}ion-content[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item-options[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{background:#fff}ion-content[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]{height:90%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#c7c7c7}ion-content[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:8rem}ion-content[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.8rem}ion-content[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{display:block;padding-left:1.6rem}ion-content[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px;font-size:1.5rem}ion-content[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   sup[_ngcontent-%COMP%]{font-weight:400;font-size:.9rem}"]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({imports:[[c.i.forChild($)],c.i]}),t})(),j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({imports:[[o.c,r.I]]}),t})();var N=n("Iyou");let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({imports:[[o.c,i.g,r.I,I,j,N.a,_.b]]}),t})()}}]);