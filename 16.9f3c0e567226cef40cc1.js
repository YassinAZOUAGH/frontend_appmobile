(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Ihoe:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("ofXK"),i=n("TEn/"),c=n("fXoL");let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({imports:[[o.c,i.I]]}),e})()},aWuB:function(e,t,n){"use strict";n.r(t),n.d(t,"EditSubFoodModule",function(){return P});var o=n("ofXK"),i=n("3Pt+"),c=n("TEn/"),r=n("tyNb"),s=n("mrSG"),b=n("fXoL"),d=n("WGBS"),a=n("0jJR");const g=["imageElement"];function l(e,t){1&e&&b.Lb(0,"div")}function u(e,t){1&e&&(b.Nb(0,"div",25),b.oc(1,"L'image est trop grande !"),b.Mb())}function p(e,t){if(1&e){const e=b.Ob();b.Nb(0,"img",22,23),b.Vb("load",function(){return b.ic(e),b.Xb(2).checkImageDimensions()}),b.Mb(),b.mc(2,u,2,0,"div",24)}if(2&e){const e=b.Xb(2);b.ec("src",e.subFood.pic,b.jc),b.Ab(2),b.ec("ngIf",e.imageError)}}function f(e,t){1&e&&(b.Nb(0,"div",25),b.oc(1,"L'image est trop grande !"),b.Mb())}function m(e,t){if(1&e){const e=b.Ob();b.Nb(0,"img",22,23),b.Vb("load",function(){return b.ic(e),b.Xb(2).checkImageDimensions()}),b.Mb(),b.mc(2,f,2,0,"div",24)}if(2&e){const e=b.Xb(2);b.ec("src",e.imgResultAfterResizeMax,b.jc),b.Ab(2),b.ec("ngIf",e.imageError)}}function h(e,t){if(1&e){const e=b.Ob();b.Nb(0,"div",9),b.Nb(1,"div",10),b.Nb(2,"label"),b.oc(3,"Name"),b.Mb(),b.Nb(4,"input",11),b.Vb("ngModelChange",function(t){return b.ic(e),b.Xb().subFood.title=t}),b.Mb(),b.Mb(),b.Nb(5,"div",10),b.Nb(6,"label"),b.oc(7,"Price"),b.Mb(),b.Nb(8,"input",12),b.Vb("ngModelChange",function(t){return b.ic(e),b.Xb().subFood.price=t}),b.Mb(),b.Mb(),b.Nb(9,"div",10),b.Nb(10,"label"),b.oc(11,"Description"),b.Mb(),b.Nb(12,"input",13),b.Vb("ngModelChange",function(t){return b.ic(e),b.Xb().subFood.description=t}),b.Mb(),b.Mb(),b.Nb(13,"div",10),b.Nb(14,"div",14),b.Nb(15,"label",15),b.oc(16," Disponible "),b.Mb(),b.Mb(),b.Nb(17,"input",16),b.Vb("ngModelChange",function(t){return b.ic(e),b.Xb().subFood.published=t}),b.Mb(),b.Mb(),b.Lb(18,"br"),b.Lb(19,"br"),b.Lb(20,"br"),b.Lb(21,"br"),b.Nb(22,"div"),b.Nb(23,"label"),b.oc(24,"Modifier l'image"),b.Mb(),b.Lb(25,"br"),b.Nb(26,"button",1),b.Vb("click",function(){return b.ic(e),b.Xb().uploadAndReturnWithMaxSize()}),b.oc(27," Veuillez choisir une image "),b.Mb(),b.Lb(28,"br"),b.Lb(29,"br"),b.Nb(30,"div",17),b.mc(31,l,1,0,"div",18),b.mc(32,p,3,2,"ng-template",null,19,b.nc),b.mc(34,m,3,2,"ng-template",null,20,b.nc),b.Mb(),b.Mb(),b.Nb(36,"ion-button",21),b.Vb("click",function(){return b.ic(e),b.Xb().updateFood()}),b.oc(37,"Update"),b.Mb(),b.Mb()}if(2&e){const e=b.gc(33),t=b.gc(35),n=b.Xb();b.Ab(4),b.ec("ngModel",n.subFood.title),b.Ab(4),b.ec("ngModel",n.subFood.price),b.Ab(4),b.ec("ngModel",n.subFood.description),b.Ab(5),b.ec("ngModel",n.subFood.published),b.Ab(14),b.ec("ngIf",!n.imgResultAfterResizeMax)("ngIfThen",e)("ngIfElse",t)}}const M=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i,c){this.activatedRoute=e,this.subFoodService=t,this.toastCtrl=n,this.router=o,this.route=i,this.imageCompress=c,this.message="",this.imgResultAfterResizeMax="",this.imageError=!1,this.id=+this.activatedRoute.snapshot.paramMap.get("id"),this.route.queryParams.subscribe(e=>{this.router.getCurrentNavigation().extras.state&&(this.idReceived=this.router.getCurrentNavigation().extras.state.sendId)})}ngOnInit(){console.log("idReceived from food",this.idReceived),console.log("id subfood",this.id),this.getSubFoodById(this.idReceived,this.id)}uploadAndReturnWithMaxSize(){return this.imageCompress.uploadAndGetImageWithMaxSize(1,!0).then(e=>{this.imgResultAfterResizeMax=e,console.log("--\x3e",e)},e=>{console.error("The compression algorithm didn't succed! The best size we can do is",this.imageCompress.byteCount(e),"bytes"),this.imgResultAfterResizeMax=e})}updateFood(){this.subFoodService.update(this.id,{title:this.subFood.title,price:this.subFood.price,pic:this.imgResultAfterResizeMax,description:this.subFood.description,published:this.subFood.published}).subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){console.log(e),this.message=e.message?e.message:"This element was updated successfully!",window.location.reload(),this.confirmationEdit(),localStorage.setItem("keyId",this.idReceived.toString())}),e=>{console.log(e)}),window.history.back()}confirmationEdit(){return Object(s.a)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Updated successfully!",mode:"ios",duration:5e3,position:"bottom",color:"success"})).present()})}getSubFoodById(e,t){this.subFoodService.getSubFoodsById(this.idReceived,this.id).subscribe(e=>{this.subFood=e,console.log(e)},e=>{console.log(e)})}goBack(){const e=localStorage.getItem("keyId"),t=parseInt(e,10);this.router.navigate(["/admin/list-sub-food",t]),sessionStorage.removeItem("keyId")}checkImageDimensions(){const e=this.imageElement.nativeElement;(e.height>400||e.height>400)&&(this.imageError=!0)}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(r.a),b.Kb(d.a),b.Kb(c.S),b.Kb(r.f),b.Kb(r.a),b.Kb(a.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-edit-sub-food"]],viewQuery:function(e,t){if(1&e&&b.sc(g,1),2&e){let e;b.fc(e=b.Wb())&&(t.imageElement=e.first)}},decls:21,vars:3,consts:[[1,"header"],[3,"click"],["slot","icon-only","color","light","name","arrow-back"],[1,"title"],["slot","icon-only","color","light","name","d-heart"],[1,"card"],[1,"image"],[3,"src"],["class","submit-form",4,"ngIf"],[1,"submit-form"],[1,"form-group"],["type","text","id","title","placeholder","Title","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","price","placeholder","Price","required","","name","price",1,"form-control",3,"ngModel","ngModelChange"],["id","description","placeholder","Description","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"cell"],[1,"label"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"img"],[4,"ngIf","ngIfThen","ngIfElse"],["content1",""],["content2",""],["color","success",3,"click"],[3,"src","load"],["imageElement",""],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(e,t){1&e&&(b.Nb(0,"ion-content"),b.Nb(1,"div",0),b.Nb(2,"ion-buttons"),b.Nb(3,"ion-button",1),b.Vb("click",function(){return t.goBack()}),b.Lb(4,"ion-icon",2),b.Mb(),b.Mb(),b.Nb(5,"div",3),b.Nb(6,"p"),b.oc(7),b.Mb(),b.Mb(),b.Nb(8,"ion-buttons"),b.Nb(9,"ion-button"),b.Lb(10,"ion-icon",4),b.Mb(),b.Mb(),b.Mb(),b.Nb(11,"div",5),b.Nb(12,"div",6),b.Lb(13,"ion-img",7),b.Mb(),b.Lb(14,"br"),b.Lb(15,"br"),b.Lb(16,"br"),b.Lb(17,"br"),b.Lb(18,"br"),b.Lb(19,"br"),b.mc(20,h,38,7,"div",8),b.Mb(),b.Mb()),2&e&&(b.Ab(7),b.qc(' You are going to modify "',null==t.subFood?null:t.subFood.title,'"'),b.Ab(6),b.ec("src",null==t.subFood?null:t.subFood.pic),b.Ab(7),b.ec("ngIf",t.subFood))},directives:[c.j,c.d,c.c,c.m,c.n,o.l,i.b,i.r,i.l,i.o,i.p,i.a],styles:['ion-content[_ngcontent-%COMP%]{--background:#6b45bc;position:relative}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem .5rem}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:60px;width:60px}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:75%;width:100%;background:#fff;position:absolute;bottom:0;border-radius:3rem 3rem 0 0;padding:2rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;top:-6.5rem;width:50%;left:50%;transform:translateX(-50%)}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-top:35%;display:flex;justify-content:space-between;align-items:center;margin-bottom:1.2rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:2.1rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#ffb800}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   sup[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:-.5rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .rates[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:3rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{margin-bottom:2.5rem}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600}ion-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;color:#b9b9b9}.title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#ffb800;font-size:1.2rem;margin-right:-.5rem}input[_ngcontent-%COMP%]{width:95%;padding:12px 20px;margin:8px;box-sizing:border-box}input[type=checkbox][_ngcontent-%COMP%]{-webkit-appearance:none;outline:none;position:absolute;height:40px;width:120px;border:15px solid var(--body);border-radius:300px;cursor:pointer;box-shadow:9px 9px 16px #bdbdbd99,-9px -9px 16px #ffffff80,inset 10px 10px 15px -10px #c3c3c3,inset -10px -10px 15px -10px #fff}input[type=checkbox][_ngcontent-%COMP%]:before{content:"";height:30px;width:30px;background-color:var(--body);position:absolute;margin:auto;top:0;left:15px;bottom:0;border-radius:50%;box-shadow:7px 7px 15px #c3c3c3,9px 9px 16px #bdbdbd99;transition:.15s}input[type=checkbox][_ngcontent-%COMP%]:after{content:"Non";position:absolute;font-size:20px;top:9px;right:15px;color:var(--text-secondary);font-family:SF Pro Text,Helvetica Neue,Helvetica,Arial,sans-serif}input[type=checkbox][_ngcontent-%COMP%]:checked{background:#0071e3}@media (prefers-color-scheme:light){input[type=checkbox][_ngcontent-%COMP%]:checked{box-shadow:9px 9px 16px #bdbdbd99,-9px -9px 16px #ffffff80,inset 10px 10px 15px -10px #0047b9,inset -10px -10px 15px -10px #0047b9}}input[type=checkbox][_ngcontent-%COMP%]:checked:before{left:85px;box-shadow:none}input[type=checkbox][_ngcontent-%COMP%]:checked:after{content:"Oui";left:15px;color:#f5f5f7}']}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({imports:[[r.i.forChild(M)],r.i]}),e})();var C=n("ej3e"),O=n("Ihoe");let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({imports:[[o.c,i.g,c.I,x,C.a,O.a]]}),e})()},ej3e:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("ofXK"),i=n("TEn/"),c=n("fXoL");let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({imports:[[o.c,i.I]]}),e})()}}]);